<!DOCTYPE html>
	<html>
		<head>
			<title>Projet</title>
			
			<meta http-equiv="Content-Type"content="text/html; charset=UTF-8" /> 
			<link rel="stylesheet"	href="style.css" type="text/css" media="screen"	/>
			<script type="text/javascript" src="dom.js" ></script>
			
			<script>
			
				<!-- API donnant accès à une base de données sur les films (acteur, nom, date de sortie etc..) -->
				<!-- Utilisation principale : données sur les films prochainement à l'affiche -->

				//
				var date = new Date()
				var day = date.getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate()

				var url = 'https://api.themoviedb.org/3/discover/movie?primary_release_date.gte='+day+'&primary_release_date.lte='+day+'&api_key=c5f2613afb0ffca9cfa80e9bb8221eb6';
				
				fetch(url).then(function(response){
					response.json().then(function(film){ 
						console.log(film)

						var myFilm = document.getElementById('film')
						var boutons = document.getElementById('boutons')
						
						//affichage des 6 prochaines sorties à partir de la date du jour
						for (var i = 0; i < 6; i++){
							// Récupération des données title, release_date, poster_path, overview
							
							var elt = document.createElement("div")
							elt.className = "slide"
							
							var titreElt = document.createElement("h2");
							titreElt.textContent = film.results[i].title;
							
							var dateElt = document.createElement("h3");
							dateElt.textContent = 'Date de sortie : '+film.results[i].release_date;
							
							var a = document.createElement('a');
							var b = document.createElement("h3");
							a.appendChild(b);

							// En commentaire pour l'instant car la bande annonce ne fonctionne pas				
							<!-- var linkText = document.createTextNode("Voir la bande annonce"); -->
							<!-- a.appendChild(linkText); -->
							
							<!-- a.href = "http://services.cineserie.com/v1/search/movies?q=Road%20to%20Christmas&release_date=2018-11-04"; -->
							
															
							var bouton = document.createElement("span");
							bouton.className = "dot"
							//ajouter onclick="currentSlide(i)" pour acceder au film en cliquant sur bouton (juste affichage mais fonctionnent pas)
							
							elt.appendChild(titreElt);
							elt.appendChild(dateElt);
							elt.appendChild(a);
							myFilm.append(elt);
							<!-- la fonction stringify caste le champ overview en chaine de caractère -->
							<!-- Affichage de l'affiche du film et du résumé au survol de l'affiche -->
							elt.innerHTML += '<img src=https://image.tmdb.org/t/p/w185_and_h278_bestv2'+film.results[i].poster_path+' title='+JSON.stringify(film.results[i].overview)+'>';
							
							boutons.append(bouton)
				
						}			
					})
				})

				
				//Carousel : 
				
				var slideIndex = 1;
				showSlides(slideIndex);

				//faire défiler les films dans le carousel par clic sur fleches
				function plusSlides(n) {
  					showSlides(slideIndex += n);
				}

				//afficher un film par clic sur bouton
				function currentSlide(n) {
  					showSlides(slideIndex = n);
				}

				//fonctionnalités d'affichage des films dans le carousel
				function showSlides(n) {
  					var i;
  					var slides = document.getElementsByClassName("slide");
  					var dots = document.getElementsByClassName("dot");
  					if (n > slides.length) {slideIndex = 1} 
  					if (n < 1) {slideIndex = slides.length}
  					for (i = 0; i < slides.length; i++) {
      					slides[i].style.display = "none"; 
  					}
  					for (i = 0; i < dots.length; i++) {
      					dots[i].className = dots[i].className.replace(" active", "");
  					}
  					slides[slideIndex-1].style.display = "block"; 
  					dots[slideIndex-1].className += " active";
				}

			
			</script>
		
		</head>
		
		<body>
		
			<div id='header'>
				Les prochains films à l'affiche 
				
			</div>
		
			<div class='corps' id='film'>		
				<!-- Fleches gauche(prev) et droite(next) pour faire défiler les films par simple clic -->
  				<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
  				<a class="next" onclick="plusSlides(1)">&#10095;</a>
			</div>
			<br>

			<!-- Boutons correspondant chacun à un film -->
			<div id='boutons' style="text-align:center"></div>
		
			<div id='footer'>
				Master MIASHS
			<div>
		
		</body>

	</html>